@using Warranty.UI.Core.Helpers
@model Warranty.Core.Features.ServiceCallSummary.ServiceCallSummaryModel


@foreach (var line in Model.ServiceCallLines)
{
    <div class="service-call-line">
        <div class="row">
            <div class="col-md-1">
                <small class="text-muted">@Format.DateMonthDayYear(Model.ServiceCallSummary.CreatedDate)</small>
            </div>
            <div class="col-md-2">
                <small class="text-muted"><span class="glyphicon glyphicon-wrench"></span> @line.ProblemCode</small>
            </div>
            <div class="col-md-5 small">
                @line.ProblemDescription
            </div>
            <div class="col-md-1 small wrap-text has-bottom-tooltip" title="Root Cause">
                @line.LineItemRoot
            </div>
            <div class="col-md-1 small">
                <div class="text-center has-bottom-tooltip" title="No. Of Line Comments">
                    <a data-toggle="collapse" href="#collapseAllLineCallNotes@(line.LineNumber)" class="text-capitalize accordion-toggle collapsed">
                        <span class="glyphicon glyphicon-comment"> <u>3</u></span>
                    </a> 
                </div>
            </div>
            <div class="col-md-1 text-center">
                @Format.OpenCloseServiceLineIndicator(line.Completed)
            </div>
            <div class="col-md-1 text-center">
                <button type="button" class="btn btn-default dropdown-toggle pull-right" data-toggle="dropdown"><span class="glyphicon glyphicon-cog"></span></button>
                <ul class="dropdown-menu" role="menu">
                    @if (!line.Completed)
                    {
                        <li>@Html.ActionLink("Edit", "Edit", "ServiceCall", new { id = @line.ServiceCallId }, null)</li>
                    }
                    <li>@Html.ActionLink("Add Commnet", "AddLineNote", "ServiceCall", new {id = Model.ServiceCallSummary.ServiceCallId}, null)</li>
                </ul>
            </div>
        </div>
        <div class="row">
            <div class="col-md-1">
                
            </div>
            <div class="col-md-2">
                <small class="text-muted">@line.ClassificationNote</small>
            </div>
            <div class="col-md-6 small">
                @line.CauseDescription
            </div>
            <div class="col-md-1 small">
                
            </div>
            <div class="col-md-1">
                
            </div>
            <div class="col-md-1">
                
            </div>
        </div>
        <div class="row">
            <div class="col-md-10 col-md-offset-1">
                <ul id="collapseAllLineCallNotes@(line.LineNumber)" class="list-group collapse no-left-right-padding small">
                    <br/>
                    <li class="list-group-item">
                        Placeholder for notes 1
                    </li>
                    <li class="list-group-item">
                        Placeholder for notes 2
                    </li>
                    <li class="list-group-item">
                        Placeholder for notes 3
                    </li>
                </ul>
            </div>
        </div>
        <div class="clearfix"></div>
    </div>
}