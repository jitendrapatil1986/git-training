@using Warranty.UI.Core.Helpers
@model Warranty.Core.Features.JobSummary.ChangeHomeowner.ChangeHomeownerModel

<div class="container">
    <section class="margin-bottom-10">
        <h2 class="pull-left no-margin">Change Homeowner</h2>
        <h2 class="pull-right no-margin">Job #@Model.JobNumber</h2>
        <div class="clearfix"></div>
    </section>
    <div class="row">
        <div class="col-md-12">
            <div class="panel panel-default">
                @Html.HiddenFor(x => x.JobId, new { id="changeHomeownerJobId" })
                <div class="panel-body">
                    <div class="row">
                        <div class="col-md-8">
                            <div class="col-md-8">
                                <h4>New Homeowner Information</h4>
                                <div class="form-group" data-bind="validationElement: ownerName">
                                    @Html.Label("Name", new{@class="control-label", @for="newHomeOwnerName"})
                                    @Html.TextBoxFor(x => x.NewHomeownerName, new { @class = "form-control", id = "newHomeownerName", data_bind = "value: ownerName" })
                                </div>
                                <div class="form-group" data-bind="validationElement: ownerPhone">
                                    @Html.Label("Primary Phone Number", new{@class="control-label", @for="newHomeownerPhone"})
                                    @Html.TextBoxFor(x => x.NewHomeownerHomePhone, new { @class = "form-control", id = "newHomeownerPhone", data_bind = "value: ownerPhone" })
                                </div>
                                <div style="display: none;" data-bind="visible: true">
                                    <div class="remove-list-style">
                                        <ul>
                                            <div data-bind="foreach: additionalPhoneContacts">
                                                <li class="row">
                                                    <div class="margin-bottom-15">
                                                        <strong><span data-bind="text: 'Additional Phone Number ' + ($index() + 1)"></span><em><span data-bind="text: ' (optional)'"></span></em></strong>
                                                        <input type="hidden" data-bind="value: contactValue, attr: { name: 'AdditionalPhoneContacts[' + $index() + '].ContactValue' }" />
                                                        <input type="text" class="form-control" data-bind="value: contactValue"/>
                                                        @*<button data-bind="click: $root.removePhoneContact" class="btn btn-default btn-xs pull-right">Delete</button>*@
                                                    </div>
                                                </li>
                                            </div>
                                        </ul>
                                    </div>
                                </div>
                                <a href="#" class="phone-number-with-extension" data-bind="click: addPhoneContact">+ Add additional phone number</a>
                                <br/>
                                <br/>
                                <div class="form-group" data-bind="validationElement: ownerEmail">
                                    @Html.Label("Primary E-mail Address", new{@class="control-label", @for="newHomeownerEmail"})
                                    @Html.TextBoxFor(x => x.NewHomeownerEmailAddress, new { @class = "form-control", id = "newHomeownerEmail", data_bind = "value: ownerEmail" })
                                </div>
                                <div style="display: none;" data-bind="visible: true">
                                    <div class="remove-list-style">
                                        <ul>
                                            <div data-bind="foreach: additionalEmailContacts">
                                                <li class="row">
                                                    <div class="margin-bottom-15">
                                                        <strong><span data-bind="text: 'Additional Email Address ' + ($index() + 1)"></span><em><span data-bind="text: ' (optional)'"></span></em></strong>
                                                        <input type="hidden" data-bind="value: contactValue, attr: { name: 'AdditionalEmailContacts[' + $index() + '].ContactValue' }" />
                                                        <input type="text" class="form-control" data-bind="value: contactValue"/>
                                                        @*<button data-bind="click: $root.removeEmailContact" class="btn btn-default btn-xs pull-right">Delete</button>*@
                                                    </div>
                                                </li>
                                            </div>
                                        </ul>
                                    </div>
                                </div>
                                <a href="#" data-bind="click: addEmailContact">+ Add additional email address</a>
                                <div class="clearfix"></div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <h4>Current Homeowner Information</h4>
                            @Format.HomeOwner(Model.CurrentHomeownerName, Model.CurrentHomeownerHomeownerNumber)
                            @Format.YearsWithinWarranty(Model.YearsWithinWarranty, Model.WarrantyStartDate)
                            <br/>
                            @Html.DisplayFor(x => x.AddressLine)
                            <br/>
                            @Format.CityStateZip(Model.City, Model.StateCode, Model.PostalCode)
                            @Format.CellNumber(Model.CurrentHomeownerHomePhone)
                            <br/>
                            @Format.HomeNumber(Model.CurrentHomeownerOtherPhone)
                            <br/>
                            <a>@Format.Email(Model.CurrentHomeownerEmailAddress)</a>
                        </div>
                    </div>
                </div>
                <div class="panel-footer text-center">
                    <div class="row">
                        <div class="col-md-12">
                            <input type="submit" value="Submit" class="btn btn-primary" data-bind="click: submit"/>
                            <a href="@Url.Action("JobSummary", "Job", new {id = Model.JobId})" class="btn btn-link">Cancel</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>