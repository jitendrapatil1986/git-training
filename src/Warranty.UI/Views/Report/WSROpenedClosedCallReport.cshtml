@using Warranty.UI.Core.Helpers
@model Warranty.Core.Features.Report.WSROpenedClosedCalls.WSROpenedClosedCallsModel

<div class="container">
    <section class="margin-bottom-10">
        <h2 class="pull-left no-margin">WSR Opened/Closed Call Report</h2>
        @if (Model.AnyResults)
        {
            <div class="warranty-header-buttons">
                <a href="javascript:window.print()" class="btn btn-default pull-right margin-botom-10 no-print"><span class="glyphicon glyphicon-print"></span> Print</a>
            </div>
        }
        <div class="clearfix"></div>
    </section>

    <div class="panel panel-default no-print">
        <div class="panel-heading">
            <div id="wsrOpenedClosedCallReportFilter">
                <div class="no-bottom-padding">
                    <div class="row">
                        <div class="col-md-12">
                            @using (Html.BeginForm("WSROpenedClosedCallReport", "Report", FormMethod.Post, new { @class = "form-inline" }))
                            {
                                <div class="form-group">
                                    @Html.TextBox("Model.StartDate", null, new { @class = "form-control datepicker-input", placeholder = "Select Start Date" })
                                </div>
                                <div class="form-group">
                                    @Html.TextBox("Model.EndDate", null, new { @class = "form-control datepicker-input", placeholder = "Select End Date" })
                                </div>
                                <div class="form-group">
                                    <input type="submit" class="btn btn-primary" value="Run Report" />
                                </div>
                            }
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    @if (!Model.AnyResults)
    {
        <p><em>No entries match report criteria</em></p>
    }
    else
    {
        <div class="row">
            <div id="wsrOpenedClosedCallSummary" class="col-md-12">
                <div class="col-xs-4 print-only">@Html.LabelFor(x => x.StartDate) : @Format.DateMonthDayYear(Model.StartDate)</div>
                <div class="col-xs-4 print-only">@Html.LabelFor(x => x.EndDate) : @Format.DateMonthDayYear(Model.EndDate)</div>
                <table width="100%" border="0" cellspacing="0" cellpadding="0" class="table table-striped table-bordered text-right table-wsr-summary">
                    <thead>
                        <tr>
                            <th>Team Member Name</th>
                            <th>Team Member Number</th>
                            <th>Starting Number of Calls</th>
                            <th>Number of Opened Calls</th>
                            <th>Number of Closed Calls</th>
                            <th>Ending Number of Calls</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var line in Model.WSRSummaryLines)
                        {
                            <tr>
                                <td>@Html.DisplayFor(model => line.EmployeeName)</td>
                                <td>@Html.DisplayFor(model => line.EmployeeNumber)</td>
                                <td>@Html.DisplayFor(model => line.NumberCallsBeforeTimeframe)</td>
                                <td>@Html.DisplayFor(model => line.NumberCallsOpenedDuringTimeframe)</td>
                                <td>@Html.DisplayFor(model => line.NumberCallsClosedDuringTimeframe)</td>
                                <td>@Html.DisplayFor(model => line.NumberCallsAfterTimeframe)</td>
                            </tr>
                        }
                        <tr class="totalLine">
                            <td>Total</td>
                            <td></td>
                            <td>@Html.DisplayFor(model => model.TotalCallsBeforeTimeframe)</td>
                            <td>@Html.DisplayFor(model => model.TotalCallsOpenedDuringTimeframe)</td>
                            <td>@Html.DisplayFor(model => model.TotalCallsClosedDuringTimeframe)</td>
                            <td>@Html.DisplayFor(model => model.TotalCallsAfterTimeframe)</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
        
    }
</div>