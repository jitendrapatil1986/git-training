@using Warranty.UI.Constants
@using Warranty.UI.Core.Helpers
@model Warranty.Core.Features.Report.Saltline.SaltlineReportModel

<div class="container">
    <section class="margin-bottom-10">
    <h2 class="pull-left no-margin">Saltline Report</h2>
     @if (Model.AnyResults)
        {
            <div class="warranty-header-buttons">
                    <a href="javascript:window.print()" class="btn btn-default pull-right margin-botom-10 no-print"><span class="glyphicon glyphicon-print"></span> Print</a>
            </div>
        }
    <div class="clearfix"></div>
        </section>
    <div class="panel panel-default no-print">
        <div class="panel-heading">
            <div id="wsrLoadingReportFilter">
                <div class="no-bottom-padding">
                    <div class="row">
                        <div class="col-md-12">
                            @using (Html.BeginForm("SaltlineReport", "Report", FormMethod.Post, new { @class = "form-inline" }))
                            {
                                <div class="form-group">
                                    @Html.TextBox("Model.StartDate", null, new { @class = "form-control monthpicker-input", placeholder = "Select Start Month" })
                                </div>
                                <div class="form-group">
                                    @Html.TextBox("Model.EndDate", null, new { @class = "form-control monthpicker-input", placeholder = "Select End Month" })
                                </div>
                                <div class="form-group">
                                    <input type="submit" class="btn btn-primary" value="Run Report" />
                                </div>
                            }
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
     @if (!Model.AnyResults)
     {
         <p><em>No entries match report criteria.</em></p>
     }
     else
     {

         <div class="row">
             <div id="averageDays" class="col-md-4">
                 <h3>Average Days</h3>
                 <table class="table table-striped table-bordered wsr">
                     <thead>
                         <tr>
                             <th>WSR</th>
                             <th>@Html.RenderTableHeaderTextWithBottomTooltip("HUW", SaltlineReportConstants.HomesUnderWarrantyTooltip)</th>
                             <th class="text-right">@Html.RenderTableHeaderTextWithBottomTooltip("# Calls", SaltlineReportConstants.NumberOfCallsTooltip)</th>
                             <th class="text-right">@Html.RenderTableHeaderTextWithBottomTooltip("Avg. Days", SaltlineReportConstants.AverageDaysTooltip)</th>
                         </tr>
                     </thead>
                     <tbody>
                         @foreach (var employee in Model.EmployeeSaltlineSummary)
                         {
                             <tr>
                                 <td class="text-capitalize">@employee.EmployeeName</td>
                                 <td>@employee.NumberOfHomes</td>
                                 <td class="text-right">@employee.NumerOfCalls</td>
                                 <td class="text-right">@Format.WithOneDecimal(@employee.AverageDaysServiceCallsOpen)</td>
                             </tr>
                         }
                     </tbody>
                 </table>
                 <table class="table table-striped table-bordered project">
                     <thead>
                         <tr>
                             <th>Project</th>
                             <th>@Html.RenderTableHeaderTextWithBottomTooltip("HUW", SaltlineReportConstants.HomesUnderWarrantyTooltip)</th>
                             <th class="text-right">@Html.RenderTableHeaderTextWithBottomTooltip("# Calls", SaltlineReportConstants.NumberOfCallsTooltip)</th>
                             <th class="text-right">@Html.RenderTableHeaderTextWithBottomTooltip("Avg. Days", SaltlineReportConstants.AverageDaysTooltip)</th>
                         </tr>
                     </thead>
                     <tbody>
                         @foreach (var project in Model.ProjectSaltlineSummary)
                         {
                             <tr>
                                 <td class="text-capitalize">@project.ProjectName</td>
                                 <td>@project.NumberOfHomes</td>
                                 <td class="text-right">@project.NumerOfCalls</td>
                                 <td class="text-right">@Format.WithOneDecimal(project.AverageDaysServiceCallsOpen)</td>
                             </tr>
                         }
                     </tbody>
                 </table>
                 <table class="table table-striped table-bordered division">
                     <thead>
                         <tr>
                             <th>Division</th>
                             <th>@Html.RenderTableHeaderTextWithBottomTooltip("HUW", SaltlineReportConstants.HomesUnderWarrantyTooltip)</th>
                             <th class="text-right">@Html.RenderTableHeaderTextWithBottomTooltip("# Calls", SaltlineReportConstants.NumberOfCallsTooltip)</th>
                             <th class="text-right">@Html.RenderTableHeaderTextWithBottomTooltip("Avg. Days", SaltlineReportConstants.AverageDaysTooltip)</th>
                         </tr>
                     </thead>
                     <tbody>
                         @foreach (var division in Model.DivisionSaltlineSummary)
                         {
                             <tr>
                                 <td class="text-capitalize">@division.DivisionName</td>
                                 <td>@division.NumberOfHomes</td>
                                 <td class="text-right">@division.NumerOfCalls</td>
                                 <td class="text-right">@Format.WithOneDecimal(division.AverageDaysServiceCallsOpen)</td>
                             </tr>
                         }
                     </tbody>
                 </table>
             </div>
             <div id="surveyScores" class="col-md-5">
                 <h3>Survey Scores</h3>
                 <table class="table table-striped table-bordered wsr">
                     <thead>
                         <tr>
                             <th>WSR</th>
                             <th class="text-right">@Html.RenderTableHeaderTextWithBottomTooltip("Number of Surveys", SaltlineReportConstants.NumberOfSurveysTooltip)</th>
                             <th class="text-right">@Html.RenderTableHeaderTextWithBottomTooltip("Truly Outstanding Warranty Service", SaltlineReportConstants.TrulyOustandingWarrantyServiceTooltip)</th>
                             <th class="text-right">@Html.RenderTableHeaderTextWithBottomTooltip("Definitely Would Recommend", SaltlineReportConstants.DefinitelyWouldRecommendTooltip)</th>
                         </tr>
                     </thead>
                     <tbody>
                         @foreach (var wsr in Model.EmployeeSaltlineSummary)
                         {
                             <tr>

                                 <td class="text-capitalize">@wsr.EmployeeName</td>
                                 <td class="text-right">@wsr.NumberOfSurveys</td>
                                 <td class="text-right">@Format.Percentage(wsr.OutstandingWarrantyService)</td>
                                 <td class="text-right">@Format.Percentage(wsr.DefinitelyWouldRecommend)</td>
                             </tr>
                         }
                     </tbody>
                 </table>
                 <table class="table table-striped table-bordered project">
                     <thead>
                         <tr>
                             <th>Project</th>
                             <th class="text-right">@Html.RenderTableHeaderTextWithBottomTooltip("# of Surveys", SaltlineReportConstants.NumberOfSurveysTooltip)</th>
                             <th class="text-right">@Html.RenderTableHeaderTextWithBottomTooltip("OWS", SaltlineReportConstants.TrulyOustandingWarrantyServiceTooltip)</th>
                             <th class="text-right">@Html.RenderTableHeaderTextWithBottomTooltip("DWR", SaltlineReportConstants.DefinitelyWouldRecommendTooltip)</th>
                         </tr>
                     </thead>
                     <tbody>
                         @foreach (var wsr in Model.ProjectSaltlineSummary)
                         {
                             <tr>

                                 <td class="text-capitalize">@wsr.ProjectName</td>
                                 <td class="text-right">@wsr.NumberOfSurveys</td>
                                 <td class="text-right">@Format.Percentage(wsr.OutstandingWarrantyService)</td>
                                 <td class="text-right">@Format.Percentage(wsr.DefinitelyWouldRecommend)</td>
                             </tr>
                         }
                     </tbody>
                 </table>
                 <table class="table table-striped table-bordered division">
                     <thead>
                         <tr>
                             <th>Division</th>
                             <th class="text-right">@Html.RenderTableHeaderTextWithBottomTooltip("# of Surveys", SaltlineReportConstants.NumberOfSurveysTooltip)</th>
                             <th class="text-right">@Html.RenderTableHeaderTextWithBottomTooltip("OWS", SaltlineReportConstants.TrulyOustandingWarrantyServiceTooltip)</th>
                             <th class="text-right">@Html.RenderTableHeaderTextWithBottomTooltip("DWR", SaltlineReportConstants.DefinitelyWouldRecommendTooltip)</th>
                         </tr>
                     </thead>
                     <tbody>
                         @foreach (var wsr in Model.DivisionSaltlineSummary)
                         {
                             <tr>
                                <td class="text-capitalize">@wsr.DivisionName</td>
                                <td class="text-right">@wsr.NumberOfSurveys</td>
                                <td class="text-right">@Format.Percentage(wsr.OutstandingWarrantyService)</td>
                                <td class="text-right">@Format.Percentage(wsr.DefinitelyWouldRecommend)</td>
                             </tr>
                         }
                     </tbody>
                 </table>
             </div>
             <div class="col-md-3">
                 <h3>$$$ Spent</h3>
                 <table class="table table-striped table-bordered wsr">
                     <thead>
                         <tr>
                             <th>WSR</th>
                             <th class="text-right">@Html.RenderTableHeaderTextWithBottomTooltip("$$", SaltlineReportConstants.DollarsSpentTooltip)</th>
                         </tr>
                     </thead>
                     <tbody>
                         @foreach (var employee in Model.EmployeeSaltlineSummary)
                         {
                             <tr>
                                 <td class="text-capitalize">@employee.EmployeeName</td>
                                 <td class="text-right">@Format.Money(employee.AmountSpentPerHome)</td>
                             </tr>
                         }
                     </tbody>
                 </table>
                 <table class="table table-striped table-bordered project">
                     <thead>
                         <tr>
                             <th>Project</th>
                             <th class="text-right">@Html.RenderTableHeaderTextWithBottomTooltip("$$", SaltlineReportConstants.DollarsSpentTooltip)</th>
                         </tr>
                     </thead>
                     <tbody>
                         @foreach (var employee in Model.ProjectSaltlineSummary)
                         {
                             <tr>
                                 <td class="text-capitalize">@employee.ProjectName</td>
                                 <td class="text-right">@Format.Money(employee.AmountSpentPerHome)</td>
                             </tr>
                         }
                     </tbody>
                 </table>
                 <table class="table table-striped table-bordered division">
                     <thead>
                         <tr>
                             <th>Division</th>
                             <th class="text-right">@Html.RenderTableHeaderTextWithBottomTooltip("$$", SaltlineReportConstants.DollarsSpentTooltip)</th>
                         </tr>
                     </thead>
                     <tbody>
                         @foreach (var employee in Model.DivisionSaltlineSummary)
                         {
                             <tr>
                                 <td class="text-capitalize">@employee.DivisionName</td>
                                 <td class="text-right">@Format.Money(employee.AmountSpentPerHome)</td>
                             </tr>
                         }
                     </tbody>
                 </table>
             </div>
         </div>


     }
</div>
